package com.rks.catalog.bootstrap;import com.rks.catalog.domain.category.Category;import com.rks.catalog.domain.product.*;import com.rks.catalog.repositories.CategoryRepository;import com.rks.catalog.repositories.ProductRepository;import org.bson.Document;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.CommandLineRunner;import org.springframework.stereotype.Component;import java.util.*;@Componentpublic class DataLoader implements CommandLineRunner {//    @Autowired//    private CacheManager cacheManager;    @Autowired    private ProductRepository productRepository;    @Autowired    private CategoryRepository categoryReposMongo;    @Override    public void run(String... args) throws Exception {        long categoryRecordCount = categoryReposMongo.count();        if (categoryRecordCount < 5) {            deleteAllCategories();            createFiveCategories();        }        deleteAllProducts();        long productRecordCount = productRepository.count();        if (productRecordCount < 5) {            //deleteAllProducts();            createFiveProducts();        }        //clearAllCache();    }    private void deleteAllCategories() {        categoryReposMongo.deleteAll();    }    /*private void clearAllCache() {        cacheManager.getCacheNames().parallelStream().forEach(name -> cacheManager.getCache(name).clear());    }*/    private void createFiveCategories() {        Category c1 = Category.builder().name("Electronics").description("Electronic Items").build();        Map attr = new HashMap();        attr.put("onSale", "yes");        attr.put("promo-code", Arrays.asList(new String[]{"DHOOM-2020", "CLOUD-9", "ANNIV", "COBOL-45", "AREA-63"}));        c1.setAttr(attr);        categoryReposMongo.save(c1);        Category c2 = Category.builder().name("Books").description("Books and Stationary").build();        categoryReposMongo.save(c2);        Category c3 = Category.builder().name("Home Appliances").description("Home Appliances").build();        categoryReposMongo.save(c3);        Category c4 = Category.builder().name("Furniture").description("Furniture").build();        categoryReposMongo.save(c4);        Category c5 = Category.builder().name("Jewellery").description("Jewellery").build();        categoryReposMongo.save(c5);        Category c6 = Category.builder().name("Beauty").description("Beauty").build();        categoryReposMongo.save(c6);        Category c7 = Category.builder().name("Office").description("Office Supplies").build();        categoryReposMongo.save(c6);    }    private void listAllProducts() {        List<Product> productList = productRepository.findByType("Coffee-Mug");        productList.forEach(product -> {            System.out.println(product);        });    }    private void deleteAllProducts() {        productRepository.deleteAll();    }    private void createFiveProducts() {        PriceInfo priceInfo = PriceInfo.builder().list(500d).retail(250d).savings(250d).build();        DimensionInfo dimensionDetails = DimensionInfo.builder().width(10).height(10).depth(1).build();        ShippingInfo shippingDetails = ShippingInfo.builder().weight(5).dimensions(dimensionDetails).build();        Product coffeeMug = Product.builder()                .category("Office").type("Coffee-Mug").sku("CM-01-R").name("Coffee mug model 01 red")                .description("The Earth Store 'Red Check' Coffee Mug Set of 2 Ceramic Mugs to Gift to Best Friend Tea Mugs Coffee Mugs Microwave Safe Coffee Mugs Ceramic Tea Cups (300 ml Each, Red)")                .shipping(shippingDetails)                .pricing(priceInfo)                .imageUrl("http://localhost:8000/red-coffee-mug.jpeg")                .build();        productRepository.save(coffeeMug);        DetailInfo detailInfo = new DetailInfo();        Map<String, Object> infoMap = new HashMap<String, Object>();        infoMap.put("title", "A Love Supreme [Original Recording Reissued]");        infoMap.put("artist", "John Coltrane");        infoMap.put("genre", new HashSet(Arrays.asList(new String[]{"Jazz", "General"})));        infoMap.put("tracks", new ArrayList<>(Arrays.asList(new String[]{                "A Love Supreme Part I: Acknowledgement",                "A Love Supreme Part II - Resolution",                "A Love Supreme, Part III: Pursuance",                "A Love Supreme, Part IV-Psalm"        })));        detailInfo.setInfoList(infoMap);        Product p1 = Product.builder().sku("aa-kk-vol-1")                .category("Music")                .type("Audio Album").name("Kishore Kumar Vol-1")                .description("By kishore kumar")                .shipping(shippingDetails)                .pricing(PriceInfo.builder().list(500d).retail(480d).savings(20d).build())                .imageUrl("http://localhost:8000/music-kk-vol1.jpeg")                .build();        productRepository.save(p1);        Product p2 = Product.builder().sku("aa-kk-vol-2")                .category("Music").type("Audio Album").name("Kishore Kumar Vol-2")                .description("By kishore kumar")                .shipping(shippingDetails)                .pricing(PriceInfo.builder().list(500d).retail(450d).savings(50d).build())                .imageUrl("http://localhost:8000/music-kk-vol2.jpeg")                .build();        productRepository.save(p2);        Product p3 = Product.builder().sku("aa-kk-vol-3")                .category("Music").type("Audio Album").name("Kishore Kumar Vol-3")                .description("By kishore kumar")                .shipping(shippingDetails)                .pricing(PriceInfo.builder().list(500d).retail(400d).savings(100d).build())                .imageUrl("http://localhost:8000/music-kk-vol3.jpeg")                .build();        productRepository.save(p3);        Product p4 = Product.builder().sku("aa-kk-vol-4")                .category("Music").type("Audio Album").name("Kishore Kumar Vol-4")                .description("By kishore kumar")                .shipping(shippingDetails)                .pricing(PriceInfo.builder().list(800d).retail(800d).savings(0d).build())                .imageUrl("http://localhost:8000/music-kk-vol4.jpeg")                .build();        productRepository.save(p4);        Product p5 = Product.builder().sku("java-00001")                .category("Books").type("Book").name("Java Performance Tuning Vol-1")                .description("Java Performance Tuning, Second Edition")                .pricing(PriceInfo.builder().list(900d).retail(900d).build())                .imageUrl("http://localhost:8000/java-perf-tuning-vol1.jpg")                .build();        productRepository.save(p5);        String temp = "{\n" +                "      \"product_id\": \"M30I20983\",\n" +                "      \"name\": \"Lenovo IdeaPad Flex 5\",\n" +                "      \"desc\": \"Lenovo IdeaPad Flex 5 11th Gen Intel Core i3 14 FHD 2-in-1 Convertible Laptop (8GB/512GB SDD/Windows 11/Office 2021/Backlit Keyboard/Fingerprint Reader/Graphite Grey/1.5Kg), 82HS015PIN\",\n" +                "      \"price\": \"45,000.00\",\n" +                "      \"image_url_thumbnail\": \"http://localhost:8000/M30I20983_160.jpg\",\n" +                "      \"image_url_big\": \"http://localhost:8000/M30I20983_big.jpg\",\n" +                "      \"product_spec\": {\n" +                "        \"Series\":\t\"IdeaPad Flex 5 14ITL05\",\n" +                "        \"Brand\":\t\"Lenovo\",\n" +                "        \"Specific Uses For Product\": \"Personal, Student, Business\",\n" +                "        \"Screen Size\": \"14 Inches\",\n" +                "        \"Operating System\":\t\"Windows 11 Home\",\n" +                "        \"Human Interface Input\": \"Keyboard\",\n" +                "        \"CPU Manufacturer\": \"Intel\",\n" +                "        \"Graphics Card Description\": \"Integrated\",\n" +                "        \"Special Feature\": \"Fingerprint Reader, Backlit Keyboard\",\n" +                "        \"Colour\": \"GRAPHITE_GREY\"\n" +                "      },\n" +                "      \"product_info\": [\n" +                "        \"Processor: 11th Gen Intel Tiger Lake Core i5-1135G7 | Speed: 2.4 GHz (Base) - 4.2 GHz (Max) | 4 Cores | 8MB Cache\",\n" +                "        \"OS and Pre-Installed Softare: Pre-Loaded Windows 11 Home with Lifetime Validity | MS Office Home and Student 2021\",\n" +                "        \"Memory and Storage: 8GB RAM DDR4-3200 | 512 GB SSD\",\n" +                "        \"Graphics : Integrated Intel UHD Graphics\",\n" +                "        \"Display: 14' Full HD (1920x1080) | Brightness: 250 nits | Glossy | IPS Technology | 45% NTSC\",\n" +                "        \"Design: 10 Point Multi-touch Touchscreen | 360 Degrees | 1.79 cm Thin and 1.5 kg Light | 4-sided Narrow Bezels | Backlit Keyboard | Fingerprint Reader\",\n" +                "        \"Battery Life: 7 Hours | 52.5Wh Battery | Quick Charge (Up to 80% in 1 Hour)\",\n" +                "        \"Camera (Built in): HD 720p Camera | Fixed Focus | Privacy Shutter | Integrated Dual Array Microphone\",\n" +                "        \"Audio: 2 x 2W Stereo Speakers | HD Audio | Dolby Audio | User facing\",\n" +                "        \"Connectivity: WiFi (11ac, 2x2) | Bluetooth 5.0\",\n" +                "        \"Ports: 2 USB 3.1 Gen 1, 1 USB 3.1 Type-C Gen 1 (support data transfer and Power Delivery), Headphone/Mic combo jack, HDMI 1.4b, 4-in-1 media reader (MMC, SD, SDHC, SDXC)\",\n" +                "        \"In the box: Laptop, Lenovo Digital Pen Stylus, Power Adapter and User Manual\",\n" +                "        \"Warranty : This genuine Lenovo Laptop comes with 1 year onsite domestic warranty from Lenovo covering manufacturing defects and not covering physical damage, 1yr Premium care and 1yr Accidental Damage Protection\",\n" +                "        \"3 months subscription to Xbox Game Pass that’s included with the purchase of your device\",\n" +                "      ]\n" +                "     }";        Product p6  = Product.builder().sku("M30I20983").category("Electronics").name("Lenovo IdeaPad Flex 5")                .description("Lenovo IdeaPad Flex 5 11th Gen Intel Core i3 14 FHD 2-in-1 Convertible Laptop (8GB/512GB SDD/Windows 11/Office 2021/Backlit Keyboard/Fingerprint Reader/Graphite Grey/1.5Kg), 82HS015PIN")                .pricing(PriceInfo.builder().list(50000d).retail(45000d).savings(5000d).build())                .imageUrl("http://localhost:8000/laptop.jpg")                .productDetails(Document.parse(temp))                .build();        productRepository.save(p6);        Product p7  = Product.builder().sku("S038BS83").category("Mobile").name("Samsung Galaxy M12")                .description("Samsung Galaxy M12 (Blue, 6GB RAM, 128GB Storage)")                .pricing(PriceInfo.builder().list(12000d).retail(10000d).savings(2000d).build())                .imageUrl("http://localhost:8000/mobile.jpg")                .build();        productRepository.save(p7);        Product p8 = Product.builder().sku("B038N234").category("Books").name("The Book of Why")                .description("The Book of Why: The New Science of Cause and Effect")                .pricing(PriceInfo.builder().list(3000d).retail(2900d).savings(100d).build())                .imageUrl("http://localhost:8000/book.jpg")                .build();        productRepository.save(p8);        Product p9 = Product.builder().sku("STN02772F").category("Stationary").name("Tera13 (Pack of 12 in 1 )")                .description("Tera13 (Pack of 12 in 1 ) Unicorn Folder with stationary / Stationary for kids / pen for kids / feather pen / sequence pen / invisible pen / sharpener / fruit eraser / pubg pen /erasers / pencil set / school set multi color")                .pricing(PriceInfo.builder().list(400d).retail(400d).build())                .imageUrl("http://localhost:8000/stationary.png")                .build();        productRepository.save(p9);    }}