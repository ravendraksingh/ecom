//package com.rks.catalog.votingonarticles;////import org.springframework.beans.factory.annotation.Autowired;//import org.springframework.data.redis.core.StringRedisTemplate;//import org.springframework.http.ResponseEntity;//import org.springframework.web.bind.annotation.*;////import javax.annotation.PostConstruct;//import java.util.HashMap;//import java.util.Map;////@RestController//@RequestMapping("/api/v1")//public class ArticleController {//    @Autowired//    StringRedisTemplate template;////    @PostConstruct//    void init() {//        HashMap<String, Object> articles = new HashMap<>();////        Map<String, String > valueMap1 = new HashMap<>();//        valueMap1.put("title", "Spring boot mongo db project");//        valueMap1.put("user", "user-1933");//        valueMap1.put("time", "1647163096.0438132");//        valueMap1.put("votes", String.valueOf(0));//        articles.put("article-1234567890", valueMap1);////        Map<String, String > valueMap2 = new HashMap<>();//        valueMap2.put("title", "New Title");//        valueMap2.put("user", "user-12345");//        valueMap2.put("time", "1647249496.0438101");//        valueMap2.put("votes", String.valueOf(0));//        articles.put("article-1234567891", valueMap2);////        Map<String, String > valueMap3 = new HashMap<>();//        valueMap3.put("title", "New dance video");//        valueMap3.put("user", "user-364850");//        valueMap3.put("time", "1646990296.043814");//        valueMap3.put("votes", String.valueOf(0));//        articles.put("article-1234567892", valueMap3);////        Map<String, String > valueMap4 = new HashMap<>();//        valueMap4.put("title", "New dance video");//        valueMap4.put("user", "user-12345");//        valueMap4.put("time", "1646903896.043815");//        valueMap4.put("votes", String.valueOf(0));//        articles.put("article-1234567893", valueMap4);////        Map<String, String > valueMap5 = new HashMap<>();//        valueMap5.put("title", "Redis course - chapter 1");//        valueMap5.put("user", "user-2644084");//        valueMap5.put("time", "1647076696.043814");//        valueMap5.put("votes", String.valueOf(0));//        articles.put("article-1234567894", valueMap5);////        articles.entrySet().stream().forEach( a -> {//            template.opsForHash().putAll(a.getKey(), (Map<?, ?>) a.getValue());//            Map<String, String> valMap = (Map<String, String>) a.getValue();//            template.opsForZSet().add("article-scores", a.getKey(), Double.parseDouble(valMap.get("votes")));//        });//    }////    @PostMapping("/article/{id}/upvote/")//    public ResponseEntity upvote(@PathVariable String id, @RequestBody String userId) {//        Long result = template.opsForSet().add("voted-"+id, userId);//        if (result == 1){//            //template.opsForZSet().incrementScore("article:"+id, "votes", 1);//            template.opsForHash().increment("article-"+id, "votes", 1);//            template.opsForZSet().incrementScore("article-scores", "article-"+id, 1);//            return ResponseEntity.ok("You have successfully submitted you vote!");//        } else {//            return ResponseEntity.ok("You have already submitted your vote. Cannot submit again.");//        }//    }//}